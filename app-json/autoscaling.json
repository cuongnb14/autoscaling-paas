{
  "id": "autoscaling",
  "groups": [
    {
      "id": "monitor",
      "apps":[
        {
          "id": "influxdb-db",
          "cpus": 0.5,
          "mem": 128,
          "instances": 1,
          "container": {
              "type": "DOCKER",
              "docker": {
                  "image": "tutum/influxdb:0.8.8",
                  "network": "BRIDGE",
                  "portMappings": [{
                      "containerPort": 8083,
                      "hostPort": 31100,
                      "protocol": "tcp"
                  },
                  {
                      "containerPort": 8086,
                      "hostPort": 31101,
                      "protocol": "tcp"
                  }]
              }
          },
          "env": {
              "PRE_CREATE_DB": "autoscaling"
          },
          "constraints": [
              ["hostname", "CLUSTER", "10.10.10.51"],
              ["hostname", "UNIQUE"]
          ]
        }
      ]
    },{
      "id": "loadbalancer",
      "apps": [
        {
          "id": "marathon-lb",
          "cpus": 0.5,
          "mem": 128,
          "cmd": "sudo /autoscaling/marathon-lb/marathon_lb.py --marathon http://10.10.10.51:8080 --haproxy-config /etc/haproxy/haproxy.cfg --group external --sse",
          "instances": 1,
          "constraints": [
              ["hostname", "CLUSTER", "10.10.10.51"],
              ["hostname", "UNIQUE"]
          ]
        }
      ]
    },{
      "id": "utility",
      "apps": [
        {
            "id": "phpmyadmin",
            "cpus": 0.5,
            "mem": 128,
            "instances": 1,
            "container": {
                "type": "DOCKER",
                "docker": {
                    "image": "phpmyadmin/phpmyadmin",
                    "network": "BRIDGE",
                    "portMappings": [{
                        "containerPort": 80,
                        "hostPort": 31103,
                        "servicePort": 31104,
                        "protocol": "tcp"
                    }]
                }
            },
            "env": {
                "PMA_ARBITRARY": "1"
            },
            "constraints": [
                ["hostname", "CLUSTER", "10.10.10.51"]
            ],
            "labels": {
                "HAPROXY_GROUP": "external"
            }
        }
      ]
    }

  ]
}
